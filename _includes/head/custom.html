<!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- KaTeX CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">

<!-- KaTeX JavaScript -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

<style>
    .inline-math {
        display: inline !important;
        margin: 0 !important;
    }

    .inline-math .katex-display {
        display: inline !important;
        margin: 0 !important;
        text-align: left !important;
    }

    .result-equation {
        display: block !important;
        margin: 0.5em 0 !important;
        text-align: center !important;
        background: none !important;
        border: none !important;
        padding: 0 !important;
    }

    .result-equation .katex-display {
        margin: 0 !important;
        padding: 0 !important;
        background: none !important;
    }

    .equation-left {
        display: block;
        text-align: left;
        margin: 0.5em 0;
    }

    .equation-left .katex-display {
        text-align: left !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .left-aligned-list {
        text-align: left;
    }

    .left-aligned-list li {
        text-align: left;
        margin-bottom: 0.5em;
    }

    .left-align-math .katex-display {
        text-align: left !important;
        margin-left: 0 !important;
        padding-left: 0 !important;
    }
</style>

<script>
    function renderMath() {
        if (typeof renderMathInElement !== 'undefined') {
            try {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "$", right: "$", display: false},
                        {left: "\\(", right: "\\)", display: false},
                        {left: "\\[", right: "\\]", display: true}
                    ],
                    throwOnError: false,
                    ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                    ignoredClasses: [],
                    processClass: 'inline-math|result-equation',
                    errorCallback: function(msg, err) {
                        console.error('KaTeX error:', msg, err);
                    }
                });
            } catch (error) {
                console.error('Error during KaTeX rendering:', error);
            }
        }
    }

    // Render on DOM ready
    document.addEventListener("DOMContentLoaded", function() {
        setTimeout(renderMath, 100);
    });

    // Render on window load
    window.addEventListener('load', function() {
        setTimeout(renderMath, 100);
    });

    // For theme navigation changes
    if (typeof MutationObserver !== 'undefined') {
        const observer = new MutationObserver(function(mutations) {
            let shouldRender = false;
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    shouldRender = true;
                }
            });
            if (shouldRender) {
                setTimeout(renderMath, 100);
            }
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    }
</script>

<!-- end custom head snippets -->
